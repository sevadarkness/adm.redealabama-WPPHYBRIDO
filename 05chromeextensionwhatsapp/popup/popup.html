<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatsHybrid Lite - Rede Alabama</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="wrap">
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- TELA 1: INSERIR CHAVE DE LICEN√áA -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="screenLicense" class="screen active">
      <div class="license-box">
        <div class="license-icon">üîê</div>
        <h2>Chave de Licen√ßa</h2>
        <p class="hint">Digite sua chave de licen√ßa para ativar o sistema</p>
        
        <div class="input-group">
          <input 
            type="password" 
            id="licenseKey" 
            placeholder="Digite a chave de licen√ßa..."
            autocomplete="off"
          />
          <button id="toggleLicenseKey" class="btn-icon" type="button" title="Mostrar/ocultar">
            üëÅÔ∏è
          </button>
        </div>
        
        <button id="btnValidateLicense" class="btn-primary btn-large" type="button">
          ‚úÖ Validar Licen√ßa
        </button>
        
        <p id="licenseError" class="error-msg hidden">
          ‚ùå Chave de licen√ßa inv√°lida
        </p>
      </div>
      
      <footer class="license-footer">
        <p>¬© 2024 Rede Alabama - Sistema Propriet√°rio</p>
        <p class="small">Protegido por Lei 9.609/98</p>
      </footer>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- TELA 2: CONFIGURAR API KEY OPENAI -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="screenApiKey" class="screen">
      <div class="api-key-box">
        <div class="success-badge">‚úÖ Licen√ßa V√°lida!</div>
        
        <div class="api-key-icon">ü§ñ</div>
        <h2>Chave API OpenAI</h2>
        <p class="hint">Configure sua chave da API OpenAI para ativar a IA</p>
        
        <div class="input-group">
          <input 
            type="password" 
            id="openaiApiKey" 
            placeholder="sk-proj-xxxxxxxxxxxxxxxxxxxxxxxx"
            autocomplete="off"
          />
          <button id="toggleApiKey" class="btn-icon" type="button" title="Mostrar/ocultar">
            üëÅÔ∏è
          </button>
        </div>
        
        <p class="hint small">
          Obtenha sua chave em: 
          <a href="https://platform.openai.com/api-keys" target="_blank">
            platform.openai.com/api-keys
          </a>
        </p>
        
        <button id="btnSaveApiKey" class="btn-primary btn-large" type="button">
          üíæ Salvar API Key
        </button>
        
        <p id="apiKeyError" class="error-msg hidden">
          ‚ùå API Key inv√°lida. Deve come√ßar com "sk-"
        </p>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- TELA 3: POPUP PRINCIPAL (NOVO DESIGN) -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="screenMain" class="screen">
      <div class="app">
        <!-- Header -->
        <header class="header">
          <div class="header-left">
            <span class="logo">ü§ñ</span>
            <div class="brand">
              <h1 class="brand-name">WhatsHybrid Lite</h1>
              <span class="brand-subtitle">Rede Alabama ‚Ä¢ Atendimento Inteligente</span>
            </div>
          </div>
          <div class="header-right">
            <button class="header-btn" id="btnReconfig" title="Reconfigurar Licen√ßa">üîê</button>
          </div>
        </header>

        <!-- Navigation Bar -->
        <nav class="navbar">
          <button class="nav-btn active" data-tab="config">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span class="nav-label">Config</span>
          </button>
          <button class="nav-btn" data-tab="quick">
            <span class="nav-icon">‚ö°</span>
            <span class="nav-label">R√°pidas</span>
          </button>
          <button class="nav-btn" data-tab="team">
            <span class="nav-icon">üë•</span>
            <span class="nav-label">Equipe</span>
          </button>
          <button class="nav-btn" data-tab="copilot">
            <span class="nav-icon">üìä</span>
            <span class="nav-label">Copilot</span>
          </button>
          <button class="nav-btn" data-tab="sync">
            <span class="nav-icon">üîÑ</span>
            <span class="nav-label">Sync</span>
          </button>
        </nav>

        <!-- Content Sections (Accordion Style) -->
        <main class="content">
          <!-- Config Section -->
          <section class="section active" data-section="config">
            <div class="accordion">
              <div class="accordion-item">
                <button class="accordion-header">
                  <span>üìù Persona do Chatbot</span>
                  <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                  <textarea id="persona" placeholder="Defina a personalidade do chatbot..."></textarea>
                </div>
              </div>
              
              <div class="accordion-item">
                <button class="accordion-header">
                  <span>üè¢ Contexto do Neg√≥cio</span>
                  <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                  <textarea id="businessContext" placeholder="Descreva seu neg√≥cio..."></textarea>
                </div>
              </div>
              
              <div class="accordion-item">
                <button class="accordion-header">
                  <span>üîß Op√ß√µes Avan√ßadas</span>
                  <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                  <div class="checkbox-group">
                    <label class="checkbox">
                      <input type="checkbox" id="autoSuggest">
                      <span>Auto-sugest√£o</span>
                    </label>
                    <label class="checkbox">
                      <input type="checkbox" id="autoMemory">
                      <span>Auto-mem√≥ria</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            
            <button class="btn btn-primary btn-full" id="saveConfig">
              üíæ Salvar Configura√ß√µes
            </button>
          </section>

          <!-- Quick Replies Section -->
          <section class="section" data-section="quick">
            <div class="quick-replies-list" id="quickRepliesList">
              <!-- Items din√¢micos -->
            </div>
            
            <div class="accordion-item">
              <button class="accordion-header">
                <span>‚ûï Nova Mensagem R√°pida</span>
                <span class="accordion-icon">‚ñº</span>
              </button>
              <div class="accordion-content">
                <div class="form-group">
                  <label>Gatilho (ex: oi, preco, horario)</label>
                  <input type="text" id="newTrigger" placeholder="/gatilho">
                </div>
                <div class="form-group">
                  <label>Resposta</label>
                  <textarea id="newResponse" placeholder="Texto da resposta..."></textarea>
                </div>
                <button class="btn btn-primary" id="addQuickReply">
                  ‚ûï Adicionar
                </button>
              </div>
            </div>
          </section>

          <!-- Team Section -->
          <section class="section" data-section="team">
            <div class="form-group">
              <label>üìù Nome do Remetente (Empresa)</label>
              <input type="text" id="senderName" placeholder="Ex: Rede Alabama">
              <p class="hint">Aparece como legenda na notifica√ß√£o do WhatsApp</p>
            </div>
            
            <div class="team-list" id="teamList">
              <!-- Items din√¢micos -->
            </div>
            
            <div class="accordion-item">
              <button class="accordion-header">
                <span>‚ûï Novo Membro</span>
                <span class="accordion-icon">‚ñº</span>
              </button>
              <div class="accordion-content">
                <div class="form-group">
                  <label>Nome</label>
                  <input type="text" id="memberName" placeholder="Nome do membro">
                </div>
                <div class="form-group">
                  <label>Telefone (com DDI)</label>
                  <input type="text" id="memberPhone" placeholder="+5511999999999">
                </div>
                <button class="btn btn-primary" id="addMember">
                  ‚ûï Adicionar
                </button>
              </div>
            </div>
            
            <div class="divider"></div>
            
            <div class="form-group">
              <label>Mensagem para Equipe</label>
              <textarea id="teamMessage" placeholder="Digite a mensagem..."></textarea>
            </div>
            
            <button class="btn btn-primary btn-full" id="sendToTeam">
              üì§ Enviar para Selecionados
            </button>
            
            <p class="hint" id="teamMessagePreview"></p>
          </section>

          <!-- Copilot Section -->
          <section class="section" data-section="copilot">
            <div class="copilot-status">
              <div class="status-card">
                <span class="status-label">Score de Confian√ßa</span>
                <span class="status-value" id="confidenceScore">--</span>
              </div>
              <div class="status-card">
                <span class="status-label">Modo</span>
                <span class="status-value" id="copilotMode">Assistido</span>
              </div>
            </div>
            
            <div class="accordion-item">
              <button class="accordion-header">
                <span>‚öôÔ∏è Configura√ß√µes</span>
                <span class="accordion-icon">‚ñº</span>
              </button>
              <div class="accordion-content">
                <div class="copilot-toggle">
                  <label class="switch">
                    <input type="checkbox" id="copilotEnabled">
                    <span class="slider"></span>
                  </label>
                  <span id="copilotStatusText">Modo Copiloto Desativado</span>
                </div>
                
                <div class="copilot-threshold-control">
                  <label>Meta para ativa√ß√£o autom√°tica:</label>
                  <div class="row">
                    <input type="range" id="copilotThreshold" min="50" max="95" value="70" step="5">
                    <span id="thresholdValue">70%</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="accordion-item">
              <button class="accordion-header">
                <span>üìà Estat√≠sticas</span>
                <span class="accordion-icon">‚ñº</span>
              </button>
              <div class="accordion-content">
                <div class="stats-grid">
                  <div class="stat-item">
                    <span class="stat-value" id="statGood">0</span>
                    <span class="stat-label">Boas</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value" id="statBad">0</span>
                    <span class="stat-label">Ruins</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value" id="statCorrections">0</span>
                    <span class="stat-label">Corre√ß√µes</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value" id="statAutoSent">0</span>
                    <span class="stat-label">Auto-envios</span>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Sync Section -->
          <section class="section" data-section="sync">
            <div class="sync-status">
              <div class="sync-indicator" id="syncIndicator">
                <span class="sync-icon">üîÑ</span>
                <span class="sync-text">√öltima sync: nunca</span>
              </div>
            </div>
            
            <button class="btn btn-primary btn-full" id="syncNow">
              üîÑ Sincronizar Agora
            </button>
            
            <div class="accordion-item">
              <button class="accordion-header">
                <span>üìä Dados Sincronizados</span>
                <span class="accordion-icon">‚ñº</span>
              </button>
              <div class="accordion-content">
                <ul class="sync-data-list">
                  <li>‚úÖ Produtos: <span id="syncProducts">0</span></li>
                  <li>‚úÖ FAQ: <span id="syncFaq">0</span></li>
                  <li>‚úÖ Respostas: <span id="syncCanned">0</span></li>
                  <li>‚úÖ Documentos: <span id="syncDocs">0</span></li>
                </ul>
              </div>
            </div>
          </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
          <span class="footer-text">üîÑ <span id="statusIndicator">Online</span> ‚Ä¢ v1.0.0</span>
          <span class="footer-text" id="lastSync">√öltima sync: --</span>
        </footer>
      </div>
    </div><!-- End screenMain -->

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- MODAL: RECONFIGURAR API KEY -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="modalReconfig" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h3 class="modal-title">üîê Reconfigurar API Key</h3>
        <p class="hint">Digite a chave de licen√ßa para acessar</p>
        
        <div class="input-group">
          <input 
            type="password" 
            id="reconfigLicenseKey" 
            placeholder="Chave de licen√ßa..."
            autocomplete="off"
          />
        </div>
        
        <p id="reconfigError" class="error-msg hidden">
          ‚ùå Chave inv√°lida
        </p>
        
        <div class="modal-actions">
          <button id="btnCancelReconfig" class="btn-secondary" type="button">Cancelar</button>
          <button id="btnConfirmReconfig" class="btn-primary" type="button">OK</button>
        </div>
      </div>
    </div>

  </div><!-- End wrap -->

  <script src="popup.js"></script>
</body>
</html>
