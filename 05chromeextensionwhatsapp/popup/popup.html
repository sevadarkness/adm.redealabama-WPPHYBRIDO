<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WhatsHybrid Lite</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="logo">WH</div>
        <div class="titles">
          <h1>WhatsHybrid Lite</h1>
          <p class="muted">ConfiguraÃ§Ãµes â€¢ IA â€¢ Equipe</p>
        </div>
      </div>
    </header>

    <!-- NavegaÃ§Ã£o por abas -->
    <div class="popup-tabs">
      <button class="popup-tab active" data-tab="config">âš™ï¸ Config</button>
      <button class="popup-tab" data-tab="quick-replies">âš¡ RÃ¡pidas</button>
      <button class="popup-tab" data-tab="team">ğŸ‘¥ Equipe</button>
    </div>

    <!-- Tab: ConfiguraÃ§Ã£o -->
    <div class="popup-tab-content active" id="tab-config">
      
      <!-- Card Chatbot (MANTIDO) -->
      <div class="card">
        <div class="cardTitle">ğŸ¤– Chatbot</div>
        
        <div class="ia-section">
          <div class="row">
            <label>Persona / Nome do Assistente</label>
            <input id="persona" placeholder="Ex: Assistente da Loja X" />
          </div>
          
          <div class="row">
            <label>Contexto do NegÃ³cio</label>
            <textarea id="businessContext" rows="4" placeholder="Descreva seu negÃ³cio, produtos, tom de voz..."></textarea>
          </div>

          <div class="row">
            <label class="check">
              <input type="checkbox" id="autoSuggest" />
              <span>Auto-sugerir respostas</span>
            </label>
            <label class="check">
              <input type="checkbox" id="autoMemory" />
              <span>Auto-memÃ³ria (LeÃ£o)</span>
            </label>
          </div>
        </div>

        <p class="hint">
          Dica: No WhatsApp Web, use o botÃ£o <b>ğŸ¤–</b> para abrir o painel.
        </p>
      </div>

      <!-- Card Modo Copiloto (MANTIDO) -->
      <div class="card">
        <div class="cardTitle">ğŸ¤– Modo Copiloto</div>
        
        <div class="copilot-status">
          <div class="confidence-header">
            <span>NÃ­vel de ConfianÃ§a da IA</span>
            <span id="confidencePercent">0%</span>
          </div>
          
          <div class="confidence-bar">
            <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
            <div class="confidence-threshold" id="confidenceThreshold" style="left: 70%"></div>
          </div>
          
          <div class="confidence-level" id="confidenceLevel">
            <span class="level-emoji">ğŸ”´</span>
            <span class="level-label">Iniciante</span>
            <span class="level-desc">IA apenas sugere respostas</span>
          </div>
        </div>
        
        <div class="copilot-controls">
          <div class="copilot-toggle">
            <label class="switch">
              <input type="checkbox" id="copilotEnabled">
              <span class="slider"></span>
            </label>
            <span id="copilotStatusText">Modo Copiloto Desativado</span>
          </div>
          
          <div class="copilot-threshold-control">
            <label>Meta para ativaÃ§Ã£o automÃ¡tica:</label>
            <div class="row">
              <input type="range" id="copilotThreshold" min="50" max="95" value="70" step="5">
              <span id="thresholdValue">70%</span>
            </div>
          </div>
        </div>
        
        <div class="copilot-stats" id="copilotStats">
          <div class="stat-item">
            <span class="stat-icon">âœ…</span>
            <span class="stat-value" id="statGood">0</span>
            <span class="stat-label">Boas</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">âŒ</span>
            <span class="stat-value" id="statBad">0</span>
            <span class="stat-label">Ruins</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">âœï¸</span>
            <span class="stat-value" id="statCorrections">0</span>
            <span class="stat-label">CorreÃ§Ãµes</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">ğŸš€</span>
            <span class="stat-value" id="statAutoSent">0</span>
            <span class="stat-label">Auto-envios</span>
          </div>
        </div>
        
        <div class="copilot-info">
          <p class="hint" id="copilotHint">
            ğŸ“ˆ <strong>Como aumentar a confianÃ§a:</strong><br>
            â€¢ Marque respostas como âœ… Boa no chat<br>
            â€¢ Use sugestÃµes sem editar<br>
            â€¢ Cadastre FAQs e produtos na aba ğŸ§  IA
          </p>
          
          <div class="copilot-goal" id="copilotGoal">
            ğŸ¯ <strong>Faltam <span id="pointsToGoal">70</span> pontos</strong> para o Modo Copiloto
          </div>
        </div>
      </div>

    </div>

    <!-- Tab: Mensagens RÃ¡pidas (NOVA) -->
    <div class="popup-tab-content" id="tab-quick-replies">
      <div class="card">
        <div class="cardTitle">âš¡ Mensagens RÃ¡pidas</div>
        <p class="hint">Crie respostas prontas para usar com um clique no chat.</p>
        
        <div class="quick-reply-form">
          <div class="row">
            <label>Gatilho (palavra-chave)</label>
            <input id="qrTrigger" placeholder="Ex: preco, horario, pix" />
          </div>
          <div class="row">
            <label>Resposta</label>
            <textarea id="qrResponse" rows="3" placeholder="Mensagem que serÃ¡ enviada..."></textarea>
          </div>
          <button id="addQuickReply" class="btn-primary">â• Adicionar</button>
        </div>
        
        <div class="quick-reply-list" id="quickReplyList">
          <!-- Lista dinÃ¢mica de mensagens rÃ¡pidas -->
        </div>
      </div>
    </div>

    <!-- Tab: Equipe (NOVA) -->
    <div class="popup-tab-content" id="tab-team">
      <div class="card">
        <div class="cardTitle">ğŸ‘¥ Equipe</div>
        
        <!-- Nome do Remetente -->
        <div class="row">
          <label>ğŸ“ Nome do Remetente (Empresa)</label>
          <input id="senderName" placeholder="Ex: Rede Alabama" />
          <p class="hint">Aparece como legenda na notificaÃ§Ã£o do WhatsApp</p>
        </div>
        
        <hr class="divider" />
        
        <!-- Adicionar Membro -->
        <div class="team-add-form">
          <div class="cardTitle">â• Adicionar Membro</div>
          <div class="row-inline">
            <input id="memberName" placeholder="Nome" />
            <input id="memberPhone" placeholder="5511999999999" />
            <button id="addMember" class="btn-small">â•</button>
          </div>
        </div>
        
        <!-- Lista de Membros -->
        <div class="team-list" id="teamList">
          <div class="cardTitle">ğŸ“‹ Membros da Equipe</div>
          <div class="team-actions">
            <button id="selectAllMembers" class="btn-mini">Selecionar Todos</button>
            <button id="clearSelection" class="btn-mini">Limpar</button>
          </div>
          <div id="teamMembersContainer">
            <!-- Lista dinÃ¢mica de membros com checkbox -->
          </div>
        </div>
        
        <hr class="divider" />
        
        <!-- Ãrea de Mensagem -->
        <div class="team-message">
          <div class="cardTitle">ğŸ’¬ Mensagem para Equipe</div>
          <textarea id="teamMessage" rows="4" placeholder="Digite a mensagem para enviar..."></textarea>
          <button id="sendToTeam" class="btn-primary btn-large">
            ğŸ“¤ Enviar para Selecionados
          </button>
          <p class="hint" id="teamMessagePreview">
            <!-- Preview da notificaÃ§Ã£o -->
          </p>
        </div>
      </div>
    </div>

    <!-- BotÃ£o Salvar (sempre visÃ­vel) -->
    <div class="actions">
      <button id="save" type="button" class="primary">ğŸ’¾ Salvar ConfiguraÃ§Ãµes</button>
    </div>

    <div id="status" class="status"></div>

    <footer class="foot">
      Use com consentimento. AutomaÃ§Ã£o agressiva pode causar bloqueios.
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
