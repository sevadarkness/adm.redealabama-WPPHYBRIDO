<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WhatsHybrid Lite</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="logo">WH</div>
        <div class="titles">
          <h1>WhatsHybrid Lite</h1>
          <p class="muted">Configura√ß√µes ‚Ä¢ IA ‚Ä¢ Campanhas ‚Ä¢ Contatos</p>
        </div>
      </div>
    </header>

    <div class="card">
      <div class="cardTitle">Conex√£o</div>

      <label>Provider</label>
      <select id="provider">
        <option value="openai">OpenAI direto</option>
        <option value="backend">Backend (proxy)</option>
      </select>

      <label>OpenAI API Key</label>
      <div class="row">
        <div class="col">
          <input id="openaiApiKey" placeholder="sk-..." type="password" />
        </div>
        <button id="toggleKey" class="mini" type="button" title="Mostrar/ocultar">üëÅ</button>
      </div>

      <div class="row">
        <div class="col">
          <label>Modelo (OpenAI)</label>
          <input id="openaiModel" placeholder="gpt-4o-mini" />
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label>Temperatura</label>
          <input id="temperature" type="number" min="0" max="2" step="0.1" />
        </div>
        <div class="col">
          <label>Max tokens</label>
          <input id="maxTokens" type="number" min="50" max="4000" step="10" />
        </div>
      </div>
    </div>

    <div class="card">
      <div class="cardTitle">Backend (opcional)</div>

      <label>Backend URL</label>
      <input id="backendUrl" placeholder="https://seu-backend.com" />

      <label>Backend Secret (opcional)</label>
      <input id="backendSecret" placeholder="X-Alabama-Proxy-Key" />

      <div class="row">
        <div class="col">
          <label>AI path</label>
          <input id="backendAiPath" placeholder="/ai/chat.php" />
        </div>
        <div class="col">
          <label>Campanhas path</label>
          <input id="backendCampaignPath" placeholder="/api/campaigns.php" />
        </div>
      </div>

      <p class="hint">
        Use backend para IA e/ou campanhas pela API oficial. O modo DOM √© assistido dentro do WhatsApp Web.
      </p>
    </div>

    <div class="card">
      <div class="cardTitle">Chatbot (robustez)</div>

      <label>Persona / Regras (system)</label>
      <textarea id="persona" rows="4" placeholder="Ex.: Voc√™ √© um atendente premium. Seja objetivo, cordial e sempre confirme detalhes antes de prometer."></textarea>

      <label>Contexto do neg√≥cio (conhecimento)</label>
      <textarea id="businessContext" rows="5" placeholder="Cole aqui informa√ß√µes do neg√≥cio: produtos, pre√ßos, hor√°rios, pol√≠ticas, links, obje√ß√µes, tom de voz..."></textarea>

      <div class="row">
        <label class="check">
          <input type="checkbox" id="autoSuggest" />
          <span>Auto-sugerir respostas</span>
        </label>
        <label class="check">
          <input type="checkbox" id="autoMemory" />
          <span>Auto-mem√≥ria (Le√£o)</span>
        </label>
      </div>

      <p class="hint">
        Dica: No WhatsApp Web, use o bot√£o <b>ü§ñ</b> para abrir o painel.
      </p>
    </div>

    
    <div class="card">
      <div class="cardTitle">üìÖ Agendamento de Mensagens</div>

      <label>Telefone (com c√≥digo do pa√≠s)</label>
      <input id="scheduleTelefone" placeholder="+5511999999999" />

      <label>Mensagem</label>
      <textarea id="scheduleMensagem" rows="3" placeholder="Digite a mensagem a ser enviada..."></textarea>

      <label>Data e Hora do Envio</label>
      <input id="scheduleDateTime" type="datetime-local" />

      <button id="btnAgendar" type="button" class="primary">
        üìÖ Agendar Envio
      </button>

      <div id="scheduleStatus" class="status" style="margin-top: 8px;"></div>

      <p class="hint">
        Agende mensagens para serem enviadas automaticamente no hor√°rio desejado.
      </p>
    </div>

    
    <div class="card">
      <div class="cardTitle">üß† Treinamento IA</div>

      <label>Tipo de Treinamento</label>
      <select id="trainingType">
        <option value="product">Produto</option>
        <option value="faq">FAQ</option>
        <option value="canned">Resposta R√°pida</option>
      </select>

      <label>T√≠tulo/Nome</label>
      <input id="trainingTitle" placeholder="Ex: Pizza Margherita" />

      <label>Conte√∫do/Descri√ß√£o</label>
      <textarea id="trainingContent" rows="4" placeholder="Digite o conte√∫do do treinamento..."></textarea>

      <button id="btnTreinar" type="button" class="primary">
        üß† Adicionar ao Treinamento
      </button>

      <div id="trainingStatus" class="status" style="margin-top: 8px;"></div>

      <p class="hint">
        Treine a IA com informa√ß√µes sobre produtos, perguntas frequentes e respostas r√°pidas.
      </p>
    </div>

    
    <div class="card">
      <div class="cardTitle">Mem√≥ria H√≠brida (Servidor)</div>

      <label>Memory Server URL</label>
      <input id="memoryServerUrl" placeholder="https://seu-servidor.com" />

      <div class="row">
        <div class="col">
          <label>Workspace Key</label>
          <input id="memoryWorkspaceKey" placeholder="chave-do-workspace" />
        </div>
        <div class="col">
          <label>Sync</label>
          <div class="check">
            <input id="memorySyncEnabled" type="checkbox" />
            <label for="memorySyncEnabled" class="muted">Sincronizar mem√≥rias</label>
          </div>
        </div>
      </div>

      <p class="hint">
        Mant√©m mem√≥ria local (cache) e sincroniza para um servidor para n√£o perder ao trocar de PC/navegador.
      </p>
    </div>

    <div class="actions">
      <button id="save" type="button" class="primary">Salvar</button>
    </div>

    <div id="status" class="status"></div>

    <footer class="foot">
      Use com consentimento. Automa√ß√£o agressiva pode causar bloqueios.
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
